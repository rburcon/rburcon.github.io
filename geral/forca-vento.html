<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Carga de Vento NBR-6123</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            margin: 20px 0;
        }
        .container {
            display: flex;
            gap: 20px;
            height: calc(100% - 80px);
            padding: 0 20px 20px 20px;
        }
        .left, .right {
            flex: 1;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            height: 100%;
        }
        .left {
            overflow-y: auto;
        }
        .right {
            overflow-y: auto;
        }
        label {
            display: grid;
            grid-template-columns: 210px auto; 
            align-items: center; 
            margin-top: 8px;
        }
        input {
            width: 100px;
            padding: 5px;
        }
        button {
            margin-top: 15px;
            padding: 8px 15px;
            border-radius: 6px;
            border: none;
            background: #007acc;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background: #005fa3;
        }
        .resultados {
            margin-top: 15px;
            background: #f4f4f4;
            padding: 10px;
            border-radius: 6px;
        }
        .right img, .right iframe {
            max-width: 100%;
            margin-bottom: 10px;
            border-radius: 6px;
        }
        label sub {
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <h1>Cálculo da Carga de Vento Devido a Pressão Dinâmica</h1>

    <div class="container">
        <div class="left">
            <p>Insira os valores abaixo:</p>

            <label>V0 (m/s): <input id="V0" type="number" value="45"></label>
            <label>S1: <input id="S1" type="number" value="1" step="0.01"></label>
            <label>bm: <input id="b" type="number" value="1"></label>
            <label>Fr: <input id="Fr" type="number" value="0.98"></label>
            <label>p: <input id="p" type="number" value="0.09" step="0.01"></label>
            <label>z (m): <input id="z" type="number" value="3"></label>
            <label>S3: <input id="S3" type="number" value="0.95" step="0.01"></label>
            <label>Inclinação da mesa (°): <input id="alfa" type="number" value="25"></label>
            <label>dt (m): <input id="dt" type="number" value="10"></label>
            <label>Ângulo terreno &#952 (°): <input id="teta" type="number" value="0"></label>

            <!-- Novos inputs -->
            <label>Altura do painel (mm): <input id="hPainel" type="number" value="2261"></label>
            <label>Largura do painel (mm): <input id="lPainel" type="number" value="1134"></label>
            <label>Peso do painel (kg): <input id="pesoPainel" type="number" value="27"></label>
            <label>N° Linhas: <input id="linhas" type="number" value="2"></label>
            <label>N° Colunas: <input id="colunas" type="number" value="23"></label>
            <label>Espaço entre linhas (mm): <input id="espLinhas" type="number" value="10"></label>
            <label>Espaço entre colunas (mm): <input id="espColunas" type="number" value="20"></label>

            <button onclick="calcular()">Calcular</button>

            <div class="resultados">
                <p id="resS2">S2: --</p>
                <p id="resVk">Velocidade corrigida: --</p>
                <p id="resQ">Pressão dinâmica: --</p>
                <p id="resQmax">qmax: --</p>
                <p id="resQmin">qmin: --</p>
                <p id="resArea">Área da mesa: -- m²</p>
                <p id="resCarga">Carga por mesa: -- N</p>
            </div>
        </div>

        <div class="right">
            <h3>Isopletas Segundo NBR-6123</h3>
            
            <iframe src="isopletas/isopletas.html" 
                    width="100%" height="500" 
                    style="border:1px solid #ccc;">
            </iframe>
            
            <img src="figuras/S1.png" alt="S1">
            <img src="figuras/S2.png" alt="S2">
            <img src="figuras/S3.png" alt="S3">
        </div>
    </div>

    <script>
        function calcular() {
            let V0 = parseFloat(document.getElementById("V0").value);
            let S1 = parseFloat(document.getElementById("S1").value);
            let b  = parseFloat(document.getElementById("b").value);
            let Fr = parseFloat(document.getElementById("Fr").value);
            let p  = parseFloat(document.getElementById("p").value);
            let z  = parseFloat(document.getElementById("z").value);
            let S3 = parseFloat(document.getElementById("S3").value);
            let alfa = parseFloat(document.getElementById("alfa").value);
            let dt = parseFloat(document.getElementById("dt").value);
            let teta = parseFloat(document.getElementById("teta").value);

            // Atualiza S1 baseado no teta
            if (teta <= 3) {
                S1 = 1;
            } else if (teta >= 6 && teta <= 17) {
                S1 = 1 + (2.5 - z/dt) * Math.tan((teta - 3) * Math.PI / 180);
            } else if (teta >= 45) {
                S1 = 1 + (2.5 - z/dt) * 0.3;
            }
            document.getElementById("S1").value = S1.toFixed(3);

            let S2 = b * Fr * Math.pow(z/10, p);
            let Vk = V0 * S1 * S2 * S3;
            let q  = 0.613 * Math.pow(Vk, 2);
            let qmax = 2 * q;
            let qmin = q * Math.tan(alfa * Math.PI / 180);

            // novos inputs
            let hPainel = parseFloat(document.getElementById("hPainel").value) / 1000;
            let lPainel = parseFloat(document.getElementById("lPainel").value) / 1000;
            let pesoPainel = parseFloat(document.getElementById("pesoPainel").value);
            let linhas = parseInt(document.getElementById("linhas").value);
            let colunas = parseInt(document.getElementById("colunas").value);
            let espLinhas = parseFloat(document.getElementById("espLinhas").value) / 1000;
            let espColunas = parseFloat(document.getElementById("espColunas").value) / 1000;

            // cálculo da área considerando espaços
            let areaMesa = (linhas * hPainel + espLinhas * (linhas - 1)) * 
                           (colunas * lPainel + espColunas * (colunas - 1));

            let cargaMesa = areaMesa * (qmax + qmin)/2 + linhas * colunas * pesoPainel * 9.81;

            document.getElementById("resS2").innerText = "S2: " + S2.toFixed(3);
            document.getElementById("resVk").innerText = "Velocidade corrigida: " + Vk.toFixed(2) + " m/s";
            document.getElementById("resQ").innerText  = "Pressão dinâmica: " + q.toFixed(2) + " N/m²";
            document.getElementById("resQmax").innerText = "qmax: " + qmax.toFixed(2) + " N/m²";
            document.getElementById("resQmin").innerText = "qmin: " + qmin.toFixed(2) + " N/m²";
            document.getElementById("resArea").innerText = "Área da mesa: " + areaMesa.toFixed(3) + " m²";
            document.getElementById("resCarga").innerText = "Carga por mesa: " + cargaMesa.toFixed(2) + " N";
        }
    </script>
</body>
</html>







